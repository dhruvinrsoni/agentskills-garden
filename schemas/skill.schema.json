{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/dhruvinrsoni/agentskills-garden/schemas/skill.schema.json",
  "title": "AgentSkill Schema",
  "description": "Meta-schema defining the structure of all agent skills in the AgentSkills Garden",
  "type": "object",
  "required": [
    "id",
    "name",
    "version",
    "level",
    "domain",
    "description",
    "interface"
  ],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z][a-z0-9_]*$",
      "description": "Unique identifier for the skill in snake_case format",
      "examples": ["summarize_code", "analyze_history", "clarify_requirement"]
    },
    "name": {
      "type": "string",
      "minLength": 3,
      "maxLength": 100,
      "description": "Human-readable name of the skill",
      "examples": ["Code Summarizer", "Git History Analyzer", "Requirement Clarifier"]
    },
    "version": {
      "type": "string",
      "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",
      "description": "Semantic version of the skill (semver format)",
      "examples": ["1.0.0", "0.1.0-alpha", "2.3.1"]
    },
    "level": {
      "type": "integer",
      "minimum": 0,
      "maximum": 4,
      "description": "Skill hierarchy level: 0=Primitives, 1=Cognitive, 2=Task, 3=Domain, 4=Compound",
      "examples": [0, 1, 2, 3, 4]
    },
    "domain": {
      "type": "string",
      "minLength": 3,
      "description": "The capability domain this skill belongs to",
      "examples": [
        "code_understanding",
        "translate_needs",
        "architectural_reasoning",
        "distributed_debugging",
        "strategic_thinking"
      ]
    },
    "description": {
      "type": "object",
      "required": ["short", "long"],
      "properties": {
        "short": {
          "type": "string",
          "minLength": 10,
          "maxLength": 200,
          "description": "Brief description for LLM tool selection (shown in tool picker)"
        },
        "long": {
          "type": "string",
          "minLength": 50,
          "description": "Detailed explanation for human understanding (documentation)"
        }
      },
      "additionalProperties": false
    },
    "interface": {
      "type": "object",
      "required": ["inputs", "outputs"],
      "properties": {
        "inputs": {
          "type": "object",
          "description": "JSON Schema defining the skill's input parameters",
          "properties": {
            "type": {
              "const": "object"
            },
            "properties": {
              "type": "object"
            },
            "required": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "outputs": {
          "type": "object",
          "description": "JSON Schema defining the skill's output structure",
          "properties": {
            "type": {
              "const": "object"
            },
            "properties": {
              "type": "object"
            },
            "required": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "context_required": {
          "type": "array",
          "description": "List of context requirements (e.g., file access, git history, network)",
          "items": {
            "type": "string",
            "enum": [
              "filesystem_read",
              "filesystem_write",
              "git_repository",
              "network_access",
              "environment_variables",
              "docker",
              "llm_access",
              "database_read",
              "database_write"
            ]
          },
          "uniqueItems": true,
          "default": []
        }
      },
      "additionalProperties": false
    },
    "dependencies": {
      "type": "array",
      "description": "List of other skill IDs that this skill depends on",
      "items": {
        "type": "string",
        "pattern": "^[a-z][a-z0-9_]*$"
      },
      "uniqueItems": true,
      "default": []
    },
    "validation": {
      "type": "object",
      "description": "Testing and validation specifications",
      "properties": {
        "test_cases": {
          "type": "array",
          "description": "Sample input/output pairs for validation",
          "items": {
            "type": "object",
            "required": ["input", "expected_output"],
            "properties": {
              "name": {
                "type": "string",
                "description": "Name of the test case"
              },
              "input": {
                "type": "object",
                "description": "Input parameters matching the inputs schema"
              },
              "expected_output": {
                "type": "object",
                "description": "Expected output matching the outputs schema"
              },
              "tags": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Tags for categorizing test cases (e.g., edge-case, performance)"
              }
            }
          },
          "default": []
        },
        "invariants": {
          "type": "array",
          "description": "Properties that must always hold regardless of input",
          "items": {
            "type": "string"
          },
          "examples": [
            ["Output must be valid JSON"],
            ["Execution time must be < 5 seconds"],
            ["Output length must be <= input length * 2"]
          ],
          "default": []
        }
      },
      "additionalProperties": false,
      "default": {}
    },
    "metadata": {
      "type": "object",
      "description": "Optional metadata about the skill's operational characteristics",
      "properties": {
        "estimated_tokens": {
          "type": "integer",
          "minimum": 0,
          "description": "Estimated token usage for typical execution"
        },
        "estimated_latency_ms": {
          "type": "integer",
          "minimum": 0,
          "description": "Estimated latency in milliseconds"
        },
        "reliability_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Expected success rate (0.0 to 1.0)"
        },
        "author": {
          "type": "string",
          "description": "Primary author or maintainer"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Searchable tags for skill discovery"
        }
      },
      "additionalProperties": true
    }
  },
  "additionalProperties": false
}
