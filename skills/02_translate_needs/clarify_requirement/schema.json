{
  "$schema": "../../schemas/skill.schema.json",
  "id": "clarify_requirement",
  "name": "Clarify Requirement",
  "version": "0.1.0",
  "level": 1,
  "domain": "translate_needs",
  "description": {
    "short": "Transforms ambiguous user requests into precise, actionable technical requirements.",
    "long": "Takes vague or incomplete requirements from users and transforms them into clear, testable specifications. Identifies missing information, asks clarifying questions, extracts implicit assumptions, and produces structured requirements that developers can implement. Part of Gap #4: Translating Business Needs to Technical Requirements."
  },
  "interface": {
    "inputs": {
      "raw_requirement": {
        "type": "string",
        "description": "The original requirement or user request",
        "required": true
      },
      "domain_context": {
        "type": "string",
        "description": "Context about the application domain (e.g., 'e-commerce', 'healthcare')",
        "required": false
      },
      "existing_features": {
        "type": "array",
        "description": "List of existing features or capabilities to consider",
        "items": {"type": "string"},
        "required": false
      },
      "stakeholder_role": {
        "type": "string",
        "description": "Role of person providing requirement",
        "enum": ["end_user", "product_manager", "developer", "executive", "other"],
        "default": "other"
      },
      "output_format": {
        "type": "string",
        "description": "Desired output format",
        "enum": ["structured", "user_story", "technical_spec", "questions_only"],
        "default": "structured"
      }
    },
    "outputs": {
      "summary": {
        "type": "string",
        "description": "Brief summary of the interpreted requirement"
      },
      "clarified_requirement": {
        "type": "object",
        "description": "The clarified, structured requirement",
        "properties": {
          "title": {"type": "string"},
          "description": {"type": "string"},
          "user_goal": {"type": "string"},
          "business_value": {"type": "string"}
        }
      },
      "acceptance_criteria": {
        "type": "array",
        "description": "Testable acceptance criteria",
        "items": {
          "type": "object",
          "properties": {
            "id": {"type": "string"},
            "given": {"type": "string"},
            "when": {"type": "string"},
            "then": {"type": "string"}
          }
        }
      },
      "implicit_assumptions": {
        "type": "array",
        "description": "Assumptions extracted from the requirement",
        "items": {
          "type": "object",
          "properties": {
            "assumption": {"type": "string"},
            "risk_if_wrong": {"type": "string"},
            "suggested_validation": {"type": "string"}
          }
        }
      },
      "clarifying_questions": {
        "type": "array",
        "description": "Questions to ask stakeholder for clarity",
        "items": {
          "type": "object",
          "properties": {
            "question": {"type": "string"},
            "why_important": {"type": "string"},
            "suggested_options": {"type": "array", "items": {"type": "string"}}
          }
        }
      },
      "edge_cases": {
        "type": "array",
        "description": "Edge cases to consider",
        "items": {"type": "string"}
      },
      "technical_considerations": {
        "type": "array",
        "description": "Technical aspects to consider during implementation",
        "items": {
          "type": "object",
          "properties": {
            "area": {"type": "string"},
            "consideration": {"type": "string"},
            "priority": {"type": "string", "enum": ["high", "medium", "low"]}
          }
        }
      },
      "confidence_score": {
        "type": "number",
        "description": "Confidence in interpretation (0-1)",
        "minimum": 0,
        "maximum": 1
      }
    },
    "context_required": ["domain_knowledge", "existing_system"]
  },
  "dependencies": [],
  "validation": {
    "test_cases": [
      {
        "name": "vague_button_request",
        "input": {
          "raw_requirement": "Add a button that does the thing",
          "domain_context": "web application"
        },
        "expected_behavior": "Should ask what 'the thing' means and where button should go"
      },
      {
        "name": "implicit_performance",
        "input": {
          "raw_requirement": "Users should be able to search products",
          "domain_context": "e-commerce"
        },
        "expected_behavior": "Should identify implicit performance requirements and edge cases"
      },
      {
        "name": "clear_requirement",
        "input": {
          "raw_requirement": "As a user, I want to reset my password via email so I can regain access",
          "domain_context": "authentication"
        },
        "expected_behavior": "Should have high confidence and minimal questions"
      }
    ],
    "invariants": [
      "confidence_score must be between 0 and 1",
      "Must always produce at least one clarifying_question for vague inputs",
      "acceptance_criteria should follow Given-When-Then format"
    ]
  },
  "metadata": {
    "author": "agentskills-garden",
    "tags": ["requirements", "clarification", "user-story", "specification"],
    "changelog": [
      {
        "version": "0.1.0",
        "date": "2025-01-20",
        "changes": ["Initial implementation"]
      }
    ]
  }
}
