{
  "id": "analyze_history",
  "name": "Git History Analyzer",
  "version": "0.1.0",
  "level": 2,
  "domain": "code_understanding",
  "description": {
    "short": "Analyze git history to explain why code exists and how it evolved",
    "long": "Examines git commit history to understand the evolution of code. This skill surfaces the 'why' behind code decisions by analyzing commit messages, authorship patterns, and change frequency. It helps engineers understand legacy code by revealing the historical context that documentation often misses. This directly addresses Gap #3 (Understanding Legacy Code) by recovering tacit knowledge encoded in version control history."
  },
  "interface": {
    "inputs": {
      "type": "object",
      "properties": {
        "file_path": {
          "type": "string",
          "description": "Path to the file to analyze (relative to repo root)"
        },
        "repo_path": {
          "type": "string",
          "description": "Path to the git repository root",
          "default": "."
        },
        "line_range": {
          "type": "object",
          "properties": {
            "start": {"type": "integer", "minimum": 1},
            "end": {"type": "integer", "minimum": 1}
          },
          "description": "Optional line range to focus analysis on"
        },
        "max_commits": {
          "type": "integer",
          "default": 50,
          "minimum": 1,
          "maximum": 500,
          "description": "Maximum number of commits to analyze"
        },
        "include_blame": {
          "type": "boolean",
          "default": true,
          "description": "Include git blame information"
        }
      },
      "required": ["file_path"]
    },
    "outputs": {
      "type": "object",
      "properties": {
        "summary": {
          "type": "string",
          "description": "High-level summary of the file's history"
        },
        "creation_context": {
          "type": "object",
          "properties": {
            "created_date": {"type": "string"},
            "created_by": {"type": "string"},
            "initial_purpose": {"type": "string"}
          },
          "description": "When and why the file was created"
        },
        "evolution_timeline": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "date": {"type": "string"},
              "author": {"type": "string"},
              "message": {"type": "string"},
              "change_type": {"type": "string"}
            }
          },
          "description": "Key milestones in the file's evolution"
        },
        "key_contributors": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "commits": {"type": "integer"},
              "lines_contributed": {"type": "integer"}
            }
          },
          "description": "Main authors who have shaped this code"
        },
        "change_patterns": {
          "type": "object",
          "properties": {
            "total_commits": {"type": "integer"},
            "change_frequency": {"type": "string"},
            "last_modified": {"type": "string"},
            "stability_assessment": {"type": "string"}
          },
          "description": "Patterns in how the code has been modified"
        },
        "notable_decisions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "date": {"type": "string"},
              "decision": {"type": "string"},
              "context": {"type": "string"}
            }
          },
          "description": "Important decisions revealed in commit history"
        },
        "related_files": {
          "type": "array",
          "items": {"type": "string"},
          "description": "Files frequently changed together with this one"
        }
      },
      "required": ["summary", "change_patterns"]
    },
    "context_required": ["git_repository", "filesystem_read"]
  },
  "dependencies": [],
  "validation": {
    "test_cases": [
      {
        "name": "analyze_main_file",
        "input": {
          "file_path": "main.py",
          "max_commits": 10
        },
        "expected_output": {
          "summary": "Analysis of main.py history"
        },
        "tags": ["integration"]
      }
    ],
    "invariants": [
      "Output must always include summary and change_patterns",
      "Execution time < 30 seconds for files with up to 500 commits",
      "Must handle files with no git history gracefully"
    ]
  },
  "metadata": {
    "estimated_tokens": 200,
    "estimated_latency_ms": 5000,
    "reliability_score": 0.85,
    "author": "AgentSkills Garden",
    "tags": ["git", "history", "legacy-code", "archaeology", "documentation"]
  }
}
