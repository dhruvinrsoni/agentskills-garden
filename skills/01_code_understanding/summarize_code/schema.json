{
  "id": "summarize_code",
  "name": "Code Summarizer",
  "version": "0.1.0",
  "level": 1,
  "domain": "code_understanding",
  "description": {
    "short": "Summarize code files or functions with structural and contextual understanding",
    "long": "Analyzes source code to produce concise, meaningful summaries that capture the purpose, structure, and key behaviors of code. Unlike naive text summarization, this skill understands programming constructs, identifies the 'what' and 'why' of code, and produces summaries useful for code review, documentation, and onboarding. This skill addresses Gap #3 (Understanding Legacy Code) by helping engineers quickly grasp unfamiliar codebases."
  },
  "interface": {
    "inputs": {
      "type": "object",
      "properties": {
        "code": {
          "type": "string",
          "description": "The source code to summarize"
        },
        "language": {
          "type": "string",
          "description": "Programming language of the code (e.g., python, javascript, java)",
          "default": "auto"
        },
        "context": {
          "type": "string",
          "description": "Optional context about the codebase or purpose"
        },
        "detail_level": {
          "type": "string",
          "enum": ["brief", "standard", "detailed"],
          "default": "standard",
          "description": "Level of detail in the summary"
        },
        "focus": {
          "type": "string",
          "enum": ["purpose", "structure", "behavior", "all"],
          "default": "all",
          "description": "What aspect of the code to focus on"
        }
      },
      "required": ["code"]
    },
    "outputs": {
      "type": "object",
      "properties": {
        "summary": {
          "type": "string",
          "description": "Human-readable summary of the code"
        },
        "purpose": {
          "type": "string",
          "description": "What the code is meant to accomplish"
        },
        "key_components": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "type": {"type": "string"},
              "description": {"type": "string"}
            }
          },
          "description": "List of key functions, classes, or components"
        },
        "dependencies": {
          "type": "array",
          "items": {"type": "string"},
          "description": "External dependencies or imports"
        },
        "complexity_indicators": {
          "type": "object",
          "properties": {
            "lines_of_code": {"type": "integer"},
            "num_functions": {"type": "integer"},
            "num_classes": {"type": "integer"},
            "estimated_complexity": {"type": "string"}
          },
          "description": "Metrics indicating code complexity"
        },
        "notable_patterns": {
          "type": "array",
          "items": {"type": "string"},
          "description": "Design patterns or notable coding patterns detected"
        }
      },
      "required": ["summary", "purpose"]
    },
    "context_required": ["filesystem_read"]
  },
  "dependencies": [],
  "validation": {
    "test_cases": [
      {
        "name": "simple_function",
        "input": {
          "code": "def add(a, b):\n    \"\"\"Add two numbers.\"\"\"\n    return a + b",
          "language": "python",
          "detail_level": "brief"
        },
        "expected_output": {
          "summary": "A simple function that adds two numbers",
          "purpose": "Perform addition of two numeric values"
        },
        "tags": ["unit", "simple"]
      },
      {
        "name": "class_with_methods",
        "input": {
          "code": "class Calculator:\n    def __init__(self):\n        self.history = []\n    \n    def add(self, a, b):\n        result = a + b\n        self.history.append(('add', a, b, result))\n        return result\n    \n    def get_history(self):\n        return self.history",
          "language": "python",
          "detail_level": "standard"
        },
        "expected_output": {
          "summary": "A Calculator class that performs arithmetic operations and maintains a history of calculations",
          "purpose": "Provide a stateful calculator with operation history tracking"
        },
        "tags": ["unit", "class"]
      }
    ],
    "invariants": [
      "Output must always include 'summary' and 'purpose' fields",
      "Summary length should be proportional to detail_level",
      "Execution time < 10 seconds for files under 1000 lines"
    ]
  },
  "metadata": {
    "estimated_tokens": 500,
    "estimated_latency_ms": 2000,
    "reliability_score": 0.9,
    "author": "AgentSkills Garden",
    "tags": ["code-analysis", "summarization", "legacy-code", "documentation"]
  }
}
